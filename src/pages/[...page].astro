---
import Layout from '../layouts/Layout.astro';
import NotesList from '../components/NotesList.astro';
import Pagination from '../components/Pagination.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths({ paginate }) {
	const notes = (await getCollection('notes')).sort(
		(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
	);
	
	return paginate(notes, { pageSize: 20 });
}

const { page } = Astro.props;
---

<Layout title="TIL - Today I Learned">
	<section class="space-y-6">
		<div class="flex flex-col space-y-2 max-w-5xl mx-auto">
			<h1 class="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl">Latest Learning</h1>
			<p class="text-muted-foreground md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
				Stuff I learned recently.
			</p>
		</div>
		<NotesList notes={page.data} />
		<div class="max-w-5xl mx-auto">
			<Pagination page={page} />
		</div>
	</section>
</Layout>
